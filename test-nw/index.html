<html>
	<head>
		<title>Sodium test</title>
	</head>
	<body>
		<div id="testOutput"></div>
		<script>
			var sodium = require('sodium');

			var keyRing = new sodium.KeyRing();
			var pubKey;

			function testEd25519(callback){
				try {
					keyRing.clear();
				} catch (e){}
				pubKey = keyRing.createKeyPair('ed25519');
				var message1 = 'message1', message2 = 'message2';
				var signature = keyRing.sign(message1);
				var detachedSignature = keyRing.sign(message2);

				var signedMessage = sodium.api.crypto_sign_open(signature, new Buffer(pubKey.publicKey, 'hex'));
				var isValid2 = sodium.api.crypto_sign_verify_detached(detachedSignature, message2, new Buffer(pubKey.publicKey, 'hex'));

			}

			function testCurve25519(callback){
				var otherKeyRing = new sodium.KeyRing();
				var otherPubKey = otherKeyRing.createKeyPair('curve25519');
				try {
					keyRing.clear();
				} catch (e){}
				pubKey = keyRing.createKeyPair('curve25519');



				otherKeyRing.clear();
			}

			testEd25519(testCurve25519);

		</script>
	</body>
</html>
